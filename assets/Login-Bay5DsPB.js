import{B as S,H as E,j as o,q as e,t as s,x as u,L,G as p,I as P}from"./index-PJsAt-0r.js";import{c as F,A as x,d as C,L as I}from"./Layout-CnjaXxaQ.js";import{M as A}from"./mail-D4cBINZu.js";import{E as B}from"./eye-off-C9cR7EnL.js";import{E as q}from"./eye-5_jIhzbT.js";function z(){const y=S(),{user:w}=E(),[n,j]=o.useState(""),[l,v]=o.useState(""),[m,N]=o.useState(!1),[r,h]=o.useState(!1),[t,g]=o.useState({}),[b,d]=o.useState(null);if(w)return y("/"),null;const _=()=>{const a={};return n.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)||(a.email="Please enter a valid email address"):a.email="Email is required",l.trim()?l.length<6&&(a.password="Password must be at least 6 characters"):a.password="Password is required",g(a),Object.keys(a).length===0},k=async a=>{if(a.preventDefault(),!_()){p.error("Please correct the errors in the form");return}h(!0);try{const{data:i,error:c}=await P.auth.signInWithPassword({email:n,password:l});if(c)throw c;p.success("Welcome back!",{description:"You have successfully logged in.",duration:3e3}),y("/")}catch(i){console.error("Login error:",i),p.error("Login failed",{description:i.message||"Invalid email or password. Please try again.",duration:5e3})}finally{h(!1)}},f=(a,i)=>{a==="email"&&j(i),a==="password"&&v(i),t[a]&&g(c=>({...c,[a]:void 0}))};return e.jsxs(F,{children:[e.jsxs("section",{className:"relative pt-32 pb-20 md:pt-40 md:pb-28 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-background to-primary/5"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(139,30,63,0.1),transparent_50%)]"}),e.jsxs("div",{className:"container-main text-center relative z-10",children:[e.jsx(s.span,{className:"text-primary text-xs uppercase tracking-[0.2em] mb-4 block font-medium",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:"Welcome Back"}),e.jsx(s.h1,{className:"font-serif text-4xl md:text-5xl lg:text-6xl mb-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:"Login"}),e.jsx(s.p,{className:"text-muted-foreground text-lg md:text-xl max-w-2xl mx-auto",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:"Sign in to your account to continue shopping."})]})]}),e.jsx("section",{className:"py-16 md:py-24 relative",children:e.jsx("div",{className:"container-main max-w-md mx-auto",children:e.jsxs(s.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"bg-card border border-border rounded-3xl p-8 md:p-10 shadow-[0_0_40px_rgba(139,30,63,0.05)]",children:[e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium",children:["Email Address ",e.jsx("span",{className:"text-primary",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(A,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx(s.input,{type:"email",id:"email",value:n,onChange:a=>f("email",a.target.value),onFocus:()=>d("email"),onBlur:()=>d(null),className:u("w-full pl-12 pr-4 py-3.5 bg-background border-2 rounded-xl","text-foreground placeholder:text-muted-foreground","focus:outline-none transition-all duration-200",b==="email"?"border-primary ring-2 ring-primary/20 shadow-[0_0_20px_rgba(139,30,63,0.15)]":"border-border hover:border-primary/50",t.email&&"border-destructive ring-2 ring-destructive/20"),placeholder:"your@email.com",disabled:r,whileFocus:{scale:1.01}}),e.jsx(x,{children:t.email&&e.jsx(s.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"text-xs text-destructive mt-1.5",children:t.email})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{htmlFor:"password",className:"block text-sm font-medium",children:["Password ",e.jsx("span",{className:"text-primary",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(C,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx(s.input,{type:m?"text":"password",id:"password",value:l,onChange:a=>f("password",a.target.value),onFocus:()=>d("password"),onBlur:()=>d(null),className:u("w-full pl-12 pr-12 py-3.5 bg-background border-2 rounded-xl","text-foreground placeholder:text-muted-foreground","focus:outline-none transition-all duration-200",b==="password"?"border-primary ring-2 ring-primary/20 shadow-[0_0_20px_rgba(139,30,63,0.15)]":"border-border hover:border-primary/50",t.password&&"border-destructive ring-2 ring-destructive/20"),placeholder:"Enter your password",disabled:r,whileFocus:{scale:1.01}}),e.jsx("button",{type:"button",onClick:()=>N(!m),className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-primary transition-colors",children:m?e.jsx(B,{className:"w-5 h-5"}):e.jsx(q,{className:"w-5 h-5"})}),e.jsx(x,{children:t.password&&e.jsx(s.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"text-xs text-destructive mt-1.5",children:t.password})})]})]}),e.jsx(s.button,{type:"submit",disabled:r,className:u("w-full py-4 rounded-xl font-medium flex items-center justify-center gap-3","bg-primary text-primary-foreground","hover:shadow-[0_0_30px_rgba(139,30,63,0.4)]","transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed"),whileHover:r?{}:{scale:1.02},whileTap:r?{}:{scale:.98},children:e.jsx(x,{mode:"wait",children:r?e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex items-center gap-3",children:[e.jsx(I,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Signing in..."})]},"loading"):e.jsx(s.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:"Sign In"},"default")})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Don't have an account?"," ",e.jsx(L,{to:"/signup",className:"text-primary hover:underline font-medium",children:"Sign up"})]})})]})})})]})}export{z as default};
