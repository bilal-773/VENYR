import{B as j,J as N,D as w,j as r,G as i,q as e,t as x,L as a}from"./index-BRNuU9-M.js";import{c as b,L as P,g as u,a as v}from"./Layout-CKMMqHxP.js";import{h as S}from"./payments-sz1C-5Rc.js";import{C}from"./check-B0X4c1uq.js";function O(){const n=j(),[c]=N(),{refreshCart:f}=w(),[h,o]=r.useState(!0),[p,l]=r.useState(!1),[m,y]=r.useState(null),t=c.get("session_id"),s=c.get("order_id");r.useEffect(()=>{if(!t||!s){i.error("Invalid payment session"),n("/");return}y(s),g()},[t,s,n]);const g=async()=>{if(!(!t||!s)){o(!0);try{await S(t,s),await f(),l(!0),i.success("Payment successful!",{description:"Your order has been confirmed.",duration:5e3}),setTimeout(()=>{n("/orders")},3e3)}catch(d){console.error("Payment processing error:",d),i.error("Payment verification failed",{description:d.message||"Please contact support if payment was processed.",duration:1e4}),l(!1)}finally{o(!1)}}};return e.jsx(b,{children:e.jsx("div",{className:"container-main pt-32 pb-24 min-h-screen flex items-center justify-center",children:e.jsx(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"max-w-2xl w-full text-center",children:h?e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"w-16 h-16 animate-spin text-primary mx-auto mb-6"}),e.jsx("h1",{className:"font-serif text-4xl md:text-5xl mb-4",children:"Processing Payment..."}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"Please wait while we verify your payment."})]}):p?e.jsxs(e.Fragment,{children:[e.jsx(x.div,{className:"w-24 h-24 bg-[#4CAF50] rounded-full flex items-center justify-center mx-auto mb-6",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:15},children:e.jsx(C,{className:"w-12 h-12 text-white",strokeWidth:3})}),e.jsx("h1",{className:"font-serif text-4xl md:text-5xl mb-4",children:"Payment Successful!"}),e.jsx("p",{className:"text-muted-foreground text-lg mb-2",children:"Thank you for your purchase."}),m&&e.jsxs("p",{className:"text-sm text-muted-foreground mb-8",children:["Order ID: #",m.slice(0,8).toUpperCase()]}),e.jsx("p",{className:"text-muted-foreground mb-8",children:"Your order has been confirmed and will be processed shortly."}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsxs(a,{to:"/orders",className:"btn-primary inline-flex items-center gap-2",children:[e.jsx(u,{className:"w-5 h-5"}),"View Orders"]}),e.jsxs(a,{to:"/",className:"btn-secondary inline-flex items-center gap-2",children:["Continue Shopping",e.jsx(v,{className:"w-5 h-5"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(u,{className:"w-12 h-12 text-red-600",strokeWidth:2})}),e.jsx("h1",{className:"font-serif text-4xl md:text-5xl mb-4",children:"Payment Verification Failed"}),e.jsx("p",{className:"text-muted-foreground text-lg mb-8",children:"There was an issue verifying your payment. Please contact support if your payment was processed."}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx(a,{to:"/orders",className:"btn-primary inline-flex items-center gap-2",children:"View Orders"}),e.jsx(a,{to:"/",className:"btn-secondary inline-flex items-center gap-2",children:"Go Home"})]})]})})})})}export{O as default};
